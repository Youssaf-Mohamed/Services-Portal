import{a as x,P as M}from"./PageHeader-DedF_tvu.js";/* empty css                                                             */import{_ as f,o as n,c as d,a as e,t as o,p as h,n as R,l as g,d as p,g as y,i as S,j as _,k as w,r as v,m as q,F as j,f as D}from"./index-Bc4wcCny.js";/* empty css                                                              *//* empty css                                                              */import{E as N}from"./EmptyState-BhBk9IQP.js";import{t as P}from"./transport.api-ktzYj7z7.js";const T={class:"status-icon"},A={__name:"StatusBadge",props:{status:{type:String,required:!0,validator:t=>["pending","approved","rejected","active","waitlisted","expired","cancelled"].includes(t)}},setup(t){const c=r=>({pending:"Pending",approved:"Approved",rejected:"Rejected",active:"Active",waitlisted:"Waitlisted",expired:"Expired",cancelled:"Cancelled"})[r]||r,a=r=>({pending:"â³",approved:"âœ“",rejected:"âœ•",active:"âœ“",waitlisted:"â³",expired:"âŠ˜",cancelled:"âœ•"})[r]||"";return(r,i)=>(n(),d("span",{class:R(["status-badge",`status-${t.status}`])},[e("span",T,o(a(t.status)),1),h(" "+o(c(t.status)),1)],2))}},$=f(A,[["__scopeId","data-v-e495d55d"]]),B={class:"request-card"},C={class:"card-header"},E={class:"header-left"},F={class:"request-info"},I={class:"request-title"},L={class:"request-meta"},V={class:"card-body"},U={class:"info-grid"},Y={class:"info-item"},H={class:"info-value"},W={class:"info-item"},z={class:"info-value"},G={key:0,class:"info-item"},O={class:"info-value"},J={class:"info-item"},K={class:"info-value"},Q={key:0,class:"rejection-notice"},X={key:1,class:"card-actions"},Z={__name:"RequestCard",props:{request:{type:Object,required:!0}},setup(t){const c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a=t,r=y(()=>a.request.route?.name_en||a.request.route_name||"Unknown Route"),i=y(()=>a.request.slot?`${c[a.request.slot.day_of_week]||"Day"}, ${a.request.slot.time}`:a.request.slot_time||"Unknown Time"),l=y(()=>a.request.amount_paid||a.request.amount_expected||0),m=u=>u==="monthly"?"Monthly Plan":"Term Plan",b=u=>u?new Date(u).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",k=u=>u?new Date(u).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A";return(u,s)=>(n(),d("div",B,[e("div",C,[e("div",E,[s[0]||(s[0]=e("div",{class:"icon-circle"},[e("span",{class:"icon"},"ðŸšŒ")],-1)),e("div",F,[e("h3",I,o(r.value),1),e("p",L,o(i.value)+" â€¢ "+o(m(t.request.plan_type)),1)])]),g($,{status:t.request.status},null,8,["status"])]),e("div",V,[e("div",U,[e("div",Y,[s[1]||(s[1]=e("span",{class:"info-label"},"Amount",-1)),e("span",H,"EGP "+o(l.value.toFixed(2)),1)]),e("div",W,[s[2]||(s[2]=e("span",{class:"info-label"},"Paid Date",-1)),e("span",z,o(b(t.request.paid_at)),1)]),t.request.payment_method?(n(),d("div",G,[s[3]||(s[3]=e("span",{class:"info-label"},"Payment Method",-1)),e("span",O,o(t.request.payment_method.name),1)])):p("",!0),e("div",J,[s[4]||(s[4]=e("span",{class:"info-label"},"Submitted",-1)),e("span",K,o(k(t.request.created_at)),1)])]),t.request.status==="rejected"&&t.request.rejection_reason?(n(),d("div",Q,[s[5]||(s[5]=e("strong",null,"Rejection Reason:",-1)),h(" "+o(t.request.rejection_reason),1)])):p("",!0),t.request.status==="pending"?(n(),d("div",X,[...s[6]||(s[6]=[e("button",{class:"btn-text"},"View Details",-1)])])):p("",!0)])]))}},ee=f(Z,[["__scopeId","data-v-11258921"]]),te={key:0,class:"loading-state"},se={key:2,class:"requests-timeline"},ae={__name:"MyRequests",setup(t){const c=v(!1),a=v([]),r=async()=>{c.value=!0;try{const i=await P.getMyRequests();a.value=i.data}catch(i){console.error("Failed to fetch requests:",i)}finally{c.value=!1}};return S(()=>{r()}),(i,l)=>(n(),_(x,null,{default:w(()=>[g(q(M),{title:"My Requests",subtitle:"Track the status of your transport subscription requests",breadcrumbs:[{label:"Home",to:"/student/transport"},{label:"Transportation",to:"/student/transport"},{label:"My Requests"}]}),c.value?(n(),d("div",te,[...l[0]||(l[0]=[e("div",{class:"spinner"},null,-1),e("p",null,"Loading your requests...",-1)])])):a.value.length===0?(n(),_(q(N),{key:1,icon:"ðŸ“‹",title:"No Requests Yet",message:"You haven't submitted any transportation requests yet.",actionText:"Browse Routes",actionTo:"/student/transport"})):(n(),d("div",se,[(n(!0),d(j,null,D(a.value,m=>(n(),_(ee,{key:m.id,request:m},null,8,["request"]))),128))]))]),_:1}))}},le=f(ae,[["__scopeId","data-v-7020945f"]]);export{le as default};
