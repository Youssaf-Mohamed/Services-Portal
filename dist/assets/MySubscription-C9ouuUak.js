import{a as k,P as N,B}from"./PageHeader-DedF_tvu.js";import{C as v}from"./Card-BNSDWmXW.js";import{B as P}from"./Badge-DkpUI6Z9.js";/* empty css                                                              */import{_ as T,i as R,j as _,k as r,r as f,o as l,l as u,m as o,c as p,a as t,t as n,p as y,n as A,d as E,g as d}from"./index-Bc4wcCny.js";import{E as C}from"./EmptyState-BhBk9IQP.js";import{t as V}from"./transport.api-ktzYj7z7.js";/* empty css                                                             *//* empty css                                                              */const F={key:0,class:"loading-state"},L={key:2,class:"subscription-container"},U={class:"card-header"},Y={class:"header-top"},H={class:"route-name"},I={class:"route-details"},$={class:"card-body"},j={class:"info-section"},q={class:"info-grid"},z={class:"info-item"},G={class:"info-value"},W={class:"info-item"},J={class:"info-value"},K={class:"info-item"},O={class:"info-item"},Q={class:"info-value"},X={key:0,class:"renewal-notice"},Z={__name:"MySubscription",setup(tt){const b=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],c=f(!1),a=f(null),g=async()=>{c.value=!0;try{const s=await V.getMySubscription();a.value=s.data}catch(s){console.error("Failed to fetch subscription:",s)}finally{c.value=!1}},w=d(()=>a.value?.route?.name_en||a.value?.route_name||"Unknown Route"),h=d(()=>a.value?.slot?`${b[a.value.slot.day_of_week]||"Day"}, ${a.value.slot.time}`:a.value?.slot_time||"Unknown Time"),i=d(()=>{if(a.value?.days_remaining!==void 0)return a.value.days_remaining;if(!a.value?.end_date)return 0;const s=new Date(a.value.end_date),M=Math.ceil((s-new Date)/(1e3*60*60*24));return Math.max(0,M)}),S=d(()=>a.value?.amount_paid_expected||a.value?.pricing?.final_amount||0),D=s=>s==="monthly"?"Monthly Plan":"Term Plan",m=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A",x=s=>({active:"success",waitlisted:"warning",expired:"neutral",cancelled:"danger"})[s]||"neutral";return R(()=>{g()}),(s,e)=>(l(),_(k,null,{default:r(()=>[u(o(N),{title:"My Subscription",subtitle:"Manage your active transport subscription and view details",breadcrumbs:[{label:"Home",to:"/student/transport"},{label:"Transportation",to:"/student/transport"},{label:"My Subscription"}]}),c.value?(l(),p("div",F,[...e[0]||(e[0]=[t("div",{class:"spinner"},null,-1),t("p",null,"Loading subscription...",-1)])])):a.value?(l(),p("div",L,[u(o(v),{padding:"none",class:"subscription-card"},{default:r(()=>[t("div",U,[t("div",Y,[t("h2",H,n(w.value),1),u(o(P),{variant:x(a.value.status)},{default:r(()=>[y(n(a.value.status),1)]),_:1},8,["variant"])]),t("p",I,n(h.value)+" â€¢ "+n(D(a.value.plan_type)),1)]),t("div",$,[t("div",j,[e[5]||(e[5]=t("h3",{class:"section-title"},"Subscription Details",-1)),t("div",q,[t("div",z,[e[1]||(e[1]=t("span",{class:"info-label"},"Start Date",-1)),t("span",G,n(m(a.value.start_date)),1)]),t("div",W,[e[2]||(e[2]=t("span",{class:"info-label"},"End Date",-1)),t("span",J,n(m(a.value.end_date)),1)]),t("div",K,[e[3]||(e[3]=t("span",{class:"info-label"},"Days Remaining",-1)),t("span",{class:A(["info-value",{"text-warning":i.value<=7}])},n(i.value)+" days ",3)]),t("div",O,[e[4]||(e[4]=t("span",{class:"info-label"},"Amount Paid",-1)),t("span",Q,"EGP "+n(S.value.toFixed(2)),1)])])]),i.value<=7&&i.value>0?(l(),p("div",X,[e[7]||(e[7]=t("strong",null,"âš ï¸ Renewal Required",-1)),t("p",null,"Your subscription expires in "+n(i.value)+" days. Renew now to continue using the service.",1),u(o(B),{variant:"warning"},{default:r(()=>[...e[6]||(e[6]=[y("Renew Subscription",-1)])]),_:1})])):E("",!0)])]),_:1})])):(l(),_(o(v),{key:1,class:"empty-subscription"},{default:r(()=>[u(o(C),{icon:"ðŸŽ«",title:"No Active Subscription",message:"You don't have an active transportation subscription yet.",actionText:"Browse Routes",actionTo:"/student/transport"})]),_:1}))]),_:1}))}},dt=T(Z,[["__scopeId","data-v-fa59a832"]]);export{dt as default};
